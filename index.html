<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Survey Redirect</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 40px;
        color: #333;
      }
    </style>
  </head>
  <body>
    <p id="status">Redirecting to surveyâ€¦</p>

    <script>
      // 1ï¸âƒ£ è®€å– URL åƒæ•¸
      const queryString = window.location.search;
      const params = new URLSearchParams(queryString);
      const version = params.get("version");

      // 2ï¸âƒ£ å®šç¾© C / D å°æ‡‰çš„ SurveyCake å•å·
      const SURVEY_MAP = {
        C: "https://www.surveycake.com/s/rpvVa",
        D: "https://www.surveycake.com/s/KWO2N"
      };

      // 3ï¸âƒ£ å®‰å…¨æª¢æŸ¥ï¼šåªå…è¨± C æˆ– D
      if (!version || !SURVEY_MAP[version]) {
        document.getElementById("status").innerText =
          "Error: Invalid or missing version parameter.";

        console.error("âŒ Invalid version:", version);
        console.error("ğŸ‘‰ Expected ?version=C or ?version=D");

        // âš ï¸ ä¸å°å‘ï¼Œç›´æ¥åœæ­¢
        throw new Error("Invalid version parameter");
      }

      // 4ï¸âƒ£ çµ„åˆæœ€çµ‚ç¶²å€ï¼ˆä¿ç•™æ‰€æœ‰åƒæ•¸ï¼‰
      const finalUrl = SURVEY_MAP[version] + queryString;

      console.log("âœ… Version:", version);
      console.log("â¡ Redirecting to:", finalUrl);

      // 5ï¸âƒ£ å°å‘ï¼ˆreplace ä¸ç•™æ­·å²ç´€éŒ„ï¼‰
      window.location.replace(finalUrl);
    </script>
  </body>
</html>
